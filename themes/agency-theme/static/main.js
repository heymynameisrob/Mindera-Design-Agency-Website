"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $mainNav=document.getElementById("nav-links"),$mainNavToggle=document.getElementById("toggle-nav-links"),$cookieBar=document.getElementById("cookie-bar"),$gaAccept=document.getElementById("ga-accept"),$gaOptout=document.getElementById("ga-optout"),$eventList=document.getElementById("event-list");document.addEventListener("DOMContentLoaded",function(){document.cookie.indexOf("seenCookieBar=true")<0&&$cookieBar.classList.add("is-visible"),$gaAccept.addEventListener("click",function(){$cookieBar.classList.remove("is-visible"),document.cookie="seenCookieBar=true; max-age=2628000; path=/"}),$gaOptout.addEventListener("click",function(){$cookieBar.classList.remove("is-visible"),gaOptout()}),$mainNavToggle.addEventListener("click",function(){return $mainNav.classList.contains("is-open")?($mainNav.classList.remove("is-open"),$mainNavToggle.innerHTML="Menu",!1):($mainNav.classList.add("is-open"),void($mainNavToggle.innerHTML="Close"))});var e=function(e,t){var n=document.createElement(e);return t.appendChild(n)};fetch("https://fast-eyrie-12998.herokuapp.com/api/strike").then(function(t){return 200!==t.status?void console.log("Looks like there was a problem. Status Code: "+t.status):void t.json().then(function(t){var n=document.querySelector(".loading-spinner"),a=t.events;a&&n.parentNode.removeChild(n),a.forEach(function(t){var n=t.id,a=t.start,o=t.end,i=t.name,r=t.url,s=t.is_free,c=t.published,l=t.status;if(!c||"live"!=l)return!1;var d=e("li",$eventList);d.innerHTML="\n              <p><strong>".concat(i.text,'</strong></p>\n              <div class="event-time">              \n                <p><strong>').concat(dayjs(a.local).format("ddd DD MMM"),"</strong></p>\n                <p>").concat(dayjs(a.local).format("HH:mm")," - ").concat(dayjs(o.local).format("HH:mm"),'</p>\n              </div>\n              <p class="event-price ').concat(s?null:"event-price-cost",'">').concat(s?"<strong>Free</strong>":"Loading...",'</p>\n              <div class="event-button-wrap">\n                <a href="').concat(r,'" class="button button-secondary">Register</a>\n              </div>\n            '),s||fetch("https://fast-eyrie-12998.herokuapp.com/api/strike/tickets?event=".concat(n)).then(function(e){200===e.status&&e.json().then(function(e){var t=document.querySelectorAll(".event-price-cost");t.forEach(function(t){t.innerHTML="<strong>".concat(e.ticket_classes[0].cost.display,"</strong>")})})})["catch"](function(e){console.log("Fetch Error :-S",e)})})})})["catch"](function(e){console.log("Fetch Error :-S",e)})}),!function(e,t){var n=t(e,e.document,Date);e.lazySizes=n,"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=n)}("undefined"!=typeof window?window:{},function(e,t,n){var a,o;if(function(){var t,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};o=e.lazySizesConfig||e.lazysizesConfig||{};for(t in n)t in o||(o[t]=n[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:o,noSupport:!0};var i=t.documentElement,r=e.HTMLPictureElement,s="addEventListener",c="getAttribute",l=e[s].bind(e),d=e.setTimeout,u=e.requestAnimationFrame||d,f=e.requestIdleCallback,m=/^picture$/i,v=["load","error","lazyincluded","_lazyloaded"],g={},p=Array.prototype.forEach,y=function(e,t){return g[t]||(g[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),g[t].test(e[c]("class")||"")&&g[t]},h=function(e,t){y(e,t)||e.setAttribute("class",(e[c]("class")||"").trim()+" "+t)},z=function(e,t){var n;(n=y(e,t))&&e.setAttribute("class",(e[c]("class")||"").replace(n," "))},b=function w(e,t,n){var a=n?s:"removeEventListener";n&&w(e,t),v.forEach(function(n){e[a](n,t)})},E=function(e,n,o,i,r){var s=t.createEvent("Event");return o||(o={}),o.instance=a,s.initEvent(n,!i,!r),s.detail=o,e.dispatchEvent(s),s},C=function(t,n){var a;!r&&(a=e.picturefill||o.pf)?(n&&n.src&&!t[c]("srcset")&&t.setAttribute("srcset",n.src),a({reevaluate:!0,elements:[t]})):n&&n.src&&(t.src=n.src)},A=function(e,t){return(getComputedStyle(e,null)||{})[t]},L=function(e,t,n){for(n=n||e.offsetWidth;n<o.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},_=function(){var e,n,a=[],o=[],i=a,r=function(){var t=i;for(i=a.length?o:a,e=!0,n=!1;t.length;)t.shift()();e=!1},s=function(a,o){e&&!o?a.apply(this,arguments):(i.push(a),n||(n=!0,(t.hidden?d:u)(r)))};return s._lsFlush=r,s}(),k=function(e,t){return t?function(){_(e)}:function(){var t=this,n=arguments;_(function(){e.apply(t,n)})}},M=function(e){var t,a=0,i=o.throttleDelay,r=o.ricTimeout,s=function(){t=!1,a=n.now(),e()},c=f&&r>49?function(){f(s,{timeout:r}),r!==o.ricTimeout&&(r=o.ricTimeout)}:k(function(){d(s)},!0);return function(e){var o;(e=!0===e)&&(r=33),t||(t=!0,o=i-(n.now()-a),0>o&&(o=0),e||9>o?c():d(c,o))}},N=function(e){var t,a,o=99,i=function(){t=null,e()},r=function s(){var e=n.now()-a;o>e?d(s,o-e):(f||i)(i)};return function(){a=n.now(),t||(t=d(r,o))}},B=function(){var r,f,v,g,L,B,$,w,T,x,H,I,O=/^img$/i,F=/^iframe$/i,W="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),j=0,D=0,R=0,q=-1,P=function(e){R--,(!e||0>R||!e.target)&&(R=0)},U=function(e){return null==I&&(I="hidden"==A(t.body,"visibility")),I||!("hidden"==A(e.parentNode,"visibility")&&"hidden"==A(e,"visibility"))},G=function(e,n){var a,o=e,r=U(e);for(w-=n,H+=n,T-=n,x+=n;r&&(o=o.offsetParent)&&o!=t.body&&o!=i;)(r=(A(o,"opacity")||1)>0)&&"visible"!=A(o,"overflow")&&(a=o.getBoundingClientRect(),r=x>a.left&&T<a.right&&H>a.top-1&&w<a.bottom+1);return r},J=function(){var e,n,s,l,d,u,m,v,p,y,h,z,b=a.elements;if((g=o.loadMode)&&8>R&&(e=b.length)){for(n=0,q++;e>n;n++)if(b[n]&&!b[n]._lazyRace)if(!W||a.prematureUnveil&&a.prematureUnveil(b[n]))te(b[n]);else if((v=b[n][c]("data-expand"))&&(u=1*v)||(u=D),y||(y=!o.expand||o.expand<1?i.clientHeight>500&&i.clientWidth>500?500:370:o.expand,a._defEx=y,h=y*o.expFactor,z=o.hFac,I=null,h>D&&1>R&&q>2&&g>2&&!t.hidden?(D=h,q=0):D=g>1&&q>1&&6>R?y:j),p!==u&&(B=innerWidth+u*z,$=innerHeight+u,m=-1*u,p=u),s=b[n].getBoundingClientRect(),(H=s.bottom)>=m&&(w=s.top)<=$&&(x=s.right)>=m*z&&(T=s.left)<=B&&(H||x||T||w)&&(o.loadHidden||U(b[n]))&&(f&&3>R&&!v&&(3>g||4>q)||G(b[n],u))){if(te(b[n]),d=!0,R>9)break}else!d&&f&&!l&&4>R&&4>q&&g>2&&(r[0]||o.preloadAfterLoad)&&(r[0]||!v&&(H||x||T||w||"auto"!=b[n][c](o.sizesAttr)))&&(l=r[0]||b[n]);l&&!d&&te(l)}},K=M(J),Q=function(e){var t=e.target;return t._lazyCache?void delete t._lazyCache:(P(e),h(t,o.loadedClass),z(t,o.loadingClass),b(t,X),E(t,"lazyloaded"),void 0)},V=k(Q),X=function(e){V({target:e.target})},Y=function(e,t){try{e.contentWindow.location.replace(t)}catch(n){e.src=t}},Z=function(e){var t,n=e[c](o.srcsetAttr);(t=o.customMedia[e[c]("data-media")||e[c]("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)},ee=k(function(e,t,n,a,i){var r,s,l,u,f,g;(f=E(e,"lazybeforeunveil",t)).defaultPrevented||(a&&(n?h(e,o.autosizesClass):e.setAttribute("sizes",a)),s=e[c](o.srcsetAttr),r=e[c](o.srcAttr),i&&(l=e.parentNode,u=l&&m.test(l.nodeName||"")),g=t.firesLoad||"src"in e&&(s||r||u),f={target:e},h(e,o.loadingClass),g&&(clearTimeout(v),v=d(P,2500),b(e,X,!0)),u&&p.call(l.getElementsByTagName("source"),Z),s?e.setAttribute("srcset",s):r&&!u&&(F.test(e.nodeName)?Y(e,r):e.src=r),i&&(s||u)&&C(e,{src:r})),e._lazyRace&&delete e._lazyRace,z(e,o.lazyClass),_(function(){var t=e.complete&&e.naturalWidth>1;g&&!t||(t&&h(e,"ls-is-cached"),Q(f),e._lazyCache=!0,d(function(){"_lazyCache"in e&&delete e._lazyCache},9)),"lazy"==e.loading&&R--},!0)}),te=function(e){if(!e._lazyRace){var t,n=O.test(e.nodeName),a=n&&(e[c](o.sizesAttr)||e[c]("sizes")),i="auto"==a;(!i&&f||!n||!e[c]("src")&&!e.srcset||e.complete||y(e,o.errorClass)||!y(e,o.lazyClass))&&(t=E(e,"lazyunveilread").detail,i&&S.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,R++,ee(e,t,i,a,n))}},ne=N(function(){o.loadMode=3,K()}),ae=function(){3==o.loadMode&&(o.loadMode=2),ne()},oe=function ie(){if(!f){if(n.now()-L<999)return void d(ie,999);f=!0,o.loadMode=3,K(),l("scroll",ae,!0)}};return{_:function(){L=n.now(),a.elements=t.getElementsByClassName(o.lazyClass),r=t.getElementsByClassName(o.lazyClass+" "+o.preloadClass),l("scroll",K,!0),l("resize",K,!0),l("pageshow",function(e){if(e.persisted){var n=t.querySelectorAll("."+o.loadingClass);n.length&&n.forEach&&u(function(){n.forEach(function(e){e.complete&&te(e)})})}}),e.MutationObserver?new MutationObserver(K).observe(i,{childList:!0,subtree:!0,attributes:!0}):(i[s]("DOMNodeInserted",K,!0),i[s]("DOMAttrModified",K,!0),setInterval(K,999)),l("hashchange",K,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){t[s](e,K,!0)}),/d$|^c/.test(t.readyState)?oe():(l("load",oe),t[s]("DOMContentLoaded",K),d(oe,2e4)),a.elements.length?(J(),_._lsFlush()):K()},checkElems:K,unveil:te,_aLSL:ae}}(),S=function(){var e,n=k(function(e,t,n,a){var o,i,r;if(e._lazysizesWidth=a,a+="px",e.setAttribute("sizes",a),m.test(t.nodeName||""))for(o=t.getElementsByTagName("source"),i=0,r=o.length;r>i;i++)o[i].setAttribute("sizes",a);n.detail.dataAttr||C(e,n.detail)}),a=function(e,t,a){var o,i=e.parentNode;i&&(a=L(e,i,a),o=E(e,"lazybeforesizes",{width:a,dataAttr:!!t}),o.defaultPrevented||(a=o.detail.width)&&a!==e._lazysizesWidth&&n(e,i,o,a))},i=function(){var t,n=e.length;if(n)for(t=0;n>t;t++)a(e[t])},r=N(i);return{_:function(){e=t.getElementsByClassName(o.autosizesClass),l("resize",r)},checkElems:r,updateElem:a}}(),$=function T(){!T.i&&t.getElementsByClassName&&(T.i=!0,S._(),B._())};return d(function(){o.init&&$()}),a={cfg:o,autoSizer:S,loader:B,init:$,uP:C,aC:h,rC:z,hC:y,fire:E,gW:L,rAF:_}});var createObserver=function(e,t){var n={rootMargin:"100px 0px",threshold:.1},a=new IntersectionObserver(t,n),o=document.querySelectorAll(e);o.forEach(function(e){a.observe(e)})},lazyLoadHandler=function(e,t){e.forEach(function(e){e.isIntersecting&&(applyImage(e.target),t.unobserve(e.target))})},animatedHandler=function(e,t){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("is-animated"),console.log(e.target))})},preLoadImages=function(e){e.forEach(function(e){var t=e.getAttribute("data-src"),n=e.getAttribute("data-srcset");e.srcset=n,e.src=t,e.classList.add("js-lazy-img__loaded"),console.log(n)})},applyImage=function(e){e.src=e.dataset.src,e.classList.add("js-lazy-img__loaded")},preLoadAnimations=function(e){e.forEach(function(e){e.classList.add("is-animated")})};if("IntersectionObserver"in window)createObserver(".animated",animatedHandler);else{var images=document.querySelectorAll(".js-lazy-img"),toBeAnimated=document.querySelectorAll(".animated");preLoadAnimations(toBeAnimated)}